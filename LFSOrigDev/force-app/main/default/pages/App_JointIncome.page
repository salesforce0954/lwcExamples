<!--
/**
 * @Description: Income Page for GE Joint Loan Application
 * @Author: Fel Saliba
 * @Date Created: 10.OCT.2013
 * @History:
   =====================================================================
       10-10-13: Created - Fel
       11-25-13: Removed mode variables - Mike
       02-11-14: Added tab level errors - Mike
       02-17-14: Included Previous Employment Status,Time at previous employer (years) 
       06-12-14: Added jQuery validation plugin - Davey
       11-03-14: Modified code for DBHZL-34  - Tony Xu
       02-07-15: Updated layout to separated previous employment into a new section
       02-29-16: TQLQW - 104 Rebranding - MDAVID
        28/03/2019 - Sprint 3 Keypad on Number field 
        Sprint 4 - Time out moved to 5 mins pop up and note help text
   =====================================================================
 */ 
-->
<apex:page standardController="Application__c" extensions="APP_JointIncomeExt" sidebar="false" showHeader="false" id="GETemplate"
    standardStylesheets="false" applyHtmlTag="true" applyBodyTag="true" docType="html-5.0" cache="false" action="{!commonAuthorizationRequired}">
    <!-- Added by DYU JUNE.12.2014 - JQUERY Validate Plugin 
         Notes: This must be placed here after the page definition to avoid with existing scripts.
    -->
    <apex:includeScript value="{!URLFOR($Resource.jQueryValidatePlugin, 'jquery-2.1.1.min.js')}" />

    <apex:includeScript value="{!URLFOR($Resource.jQueryValidatePlugin, 'jquery.validate.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.jQueryValidatePlugin, 'jquery.validate.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.jQueryValidatePlugin, 'additional-methods.js')}" />
    <apex:includeScript value="{!$Resource.jqueryValidateScript}" />

    <style>
        .comp800 {
            max-width: 700px !important;
            width: 100% !important;
            margin: 0 auto !important;
            float: none !important;
            padding-right: 106px !important;
        }

        #incomeOneErr {
            background-color: #CC0033 !important;
            color: #ffffff !important;
            font-size: 14px !important;
            line-height: 22px;
            padding: 5px 10px !important;
            -webkit-border-radius: 0 !important;
            -moz-border-radius: 0 !important;
            border-radius: 0 !important;
            text-align: left !important;
            width: 100%;
        }

        #incomeOneErr1 {
            background-color: #CC0033 !important;
            color: #ffffff !important;
            font-size: 14px !important;
            line-height: 22px;
            padding: 5px 10px !important;
            -webkit-border-radius: 0 !important;
            -moz-border-radius: 0 !important;
            border-radius: 0 !important;
            text-align: left !important;
            width: 100%;
        }
    </style>

    <apex:outputPanel rendered="{!$Site.Name=='Gem'}">
        <style>
            @media screen and (min-width: 0px) and (max-width: 425px) and (orientation: portrait) {
                .gem-mobile-style {
                    width: 100% !important;
                }

                .gem-mobile {
                    height: 119.2px !important;
                }

                .gem-mobile .pix40 {
                    height: 64.2px !important;
                }                   
            }

            @media screen and (min-width: 0px) and (max-width: 320px) and (orientation: portrait) {
                .gem-mobile-style .gem-mobile-style-flabel {
                    margin-left: 0px !important;        
                }       
            } 
            
            @media screen and (min-width: 426px) and (max-width: 630px) and (orientation: portrait){
                .gem-mobile-style {
                    width: 105% !important;
                    font-size: 18px !important;
                } 
                
                .isEmployerMonths {
                  margin-top: 35px !important;
                 }              
            }                       

             @media screen and (min-width: 411px) and (max-width: 731px) and (orientation: portrait){                
                .isEmployerMonths {
                  margin-top: -16px !important;
                 }              
            }
                 
        </style>
    </apex:outputPanel>

    <apex:outputPanel rendered="{!$Site.Name=='Kiwibank'}">
        <style>
            @media screen and (min-width: 0px) and (max-width: 425px) and (orientation: portrait) {
                .gem-mobile-style {
                    width: 108% !important;
                }

                .gem-mobile {
                    height: 119.2px !important;
                }

                .gem-mobile .pix40 {
                    height: 64.2px !important;
                }                   
            }

            @media screen and (min-width: 0px) and (max-width: 320px) and (orientation: portrait) {
                .gem-mobile-style .gem-mobile-style-flabel {
                    margin-left: 0px !important;  
                }       
            }  
            
            @media screen (max-width: 320px){
                .gem-mobile-style {
                    width: 108% !important;  
                }       
            }          

            @media screen and (min-width: 426px) and (max-width: 630px) and (orientation: portrait){
                .gem-mobile-style {
                    width: 105% !important;
                }                
            }

        </style>
    </apex:outputPanel>

    <!-- The following script is added by Tony Xu for DBHZL-34, to replace default "--Nonoe--" 
    option for picklist with "Please Select" -->
    <script type="text/javascript">
        $(document).ready(function () {
            //BEGIN MLASALA 23-SEPT-16 TQLQW-483 Gen 2 App form
            //Change please select to select
            $('[id*=a1PrimaryEmploymentStatusPick] option[value=""]').text("Select");
            $('[id*=a1PreviousEmploymentStatusPick] option[value=""]').text("Select");
            $('[id*=a2PrimaryEmploymentStatusPick] option[value=""]').text("Select");
            $('[id*=a2PreviousEmploymentStatusPick] option[value=""]').text("Select");
            //END MLASALA 23-SEPT-16 TQLQW-483 Gen 2 App form
        });
    </script>
    <script>
        var j$ = jQuery.noConflict();
        function trimField(element) {
            element.value = element.value.replace(/,/g, "");
        }

        function calculateTotalLoanAmount(elem) {
            if (isNaN(elem.value)) {
                elem.value = '';
            }
            UpdateAmount();
        }

        function hideIncomeError() {
            var siteName = "{!$Site.Name}";

            if (siteName == 'Gem' || siteName == 'Kiwibank') {
                var confirmIncChange1 = document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock1:confirmincomechange1');
                var confirmIncChange2 = document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock2:confirmincomechange2');


                var tab = document.getElementById('GETemplate:GETemplate:mainForm:selectedList').value;
                if (confirmIncChange1.value == '' && tab == '1') {
                    document.getElementById('incomeOneErr').style.display = 'block';
                    document.getElementById('incomeOneErr').innerHTML = 'Please select an option.';
                    document.getElementById('incomeOneErr').scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });
                    return false;
                } else if (tab == '1') {
                    document.getElementById('incomeOneErr').style.display = 'none';
                    return true;
                }

                if (confirmIncChange2.value == '' && tab == '2') {
                    document.getElementById('incomeOneErr1').style.display = 'block';
                    document.getElementById('incomeOneErr1').innerHTML = 'Please select an option.';
                    document.getElementById('incomeOneErr1').scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });
                    return false;
                } else if (tab == '2') {
                    document.getElementById('incomeOneErr1').style.display = 'none';
                    return true;
                }
            } else if (siteName == 'Latitude') {
                return true;
            }
        }


        var incomeChangesYes1 = "GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock1:incomeChangesYes1";
        var incomeChangesNo1 = "GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock1:incomeChangesNo1";

        var incomeChangesA2Yes1 = "GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock2:incomeChangesYes1";
        var incomeChangesA2No1 = "GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock2:incomeChangesNo1";

        var incomeChangesValue;
        var incomeChangesValue2;

        function incomeChangesConfirmation(elem) {

            incomeChangesValue = document.getElementById("GETemplate:GETemplate:loanForm:incomeChangesValue");
            incomeChangesValue2 = document.getElementById("GETemplate:GETemplate:loanForm:incomeChangesValue2");
            var incomeChangesMessage = document.getElementById("incomeChangesMessage");

            if (elem.id == incomeChangesYes1) {
                incomeChangesValue.value = elem.innerHTML.trim();
                incomeChangesMessage.style.display = 'block';
                incomeChangesMessage.innerHTML = 'Please adjust your income to the expected lower amount in the income fields above.';
                document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock1:confirmincomechange1').value = incomeChangesValue.value;


            }
            if (elem.id == incomeChangesNo1) {
                incomeChangesValue.value = elem.innerHTML.trim();;
                incomeChangesMessage.style.display = 'none';
                document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock1:confirmincomechange1').value = incomeChangesValue.value;

            }


            if (elem.id == incomeChangesA2Yes1) {
                incomeChangesValue2.value = elem.innerHTML.trim();
                incomeChangesMessageA2.style.display = 'block';
                incomeChangesMessageA2.innerHTML = 'Please adjust your income to the expected lower amount in the income fields above.';
                document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock2:confirmincomechange2').value = incomeChangesValue2.value;
            }
            if (elem.id == incomeChangesA2No1) {
                incomeChangesValue2.value = elem.innerHTML.trim();
                incomeChangesMessageA2.style.display = 'none';
                document.getElementById('GETemplate:GETemplate:mainForm:incomePageBlock:incomePageBlock2:confirmincomechange2').value = incomeChangesValue2.value;
            }

            checkRequiredfields();
        }

        var siteName = "{!$Site.Name}";
        var selectedStyle;
        var unSelectedStyle;

        if (siteName == 'Gem') {
            selectedStyle = "color: #fff; background:#4465ad; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;";
            unSelectedStyle = "color: #4465ad; background:#fff; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;";
        }

        if (siteName == 'Kiwibank') {
            selectedStyle = "color: #fff; background:#88C83D; border: 1px solid #88C83D!important;padding:3px 55px;margin-left:35px;";
            unSelectedStyle = "color: #88C83D; background:#fff; border: 1px solid #88C83D !important;padding:3px 55px;margin-left:35px;";
        }
        function checkRequiredfields() {
            incomeChangesValue = document.getElementById("GETemplate:GETemplate:loanForm:incomeChangesValue");
            incomeChangesValue2 = document.getElementById("GETemplate:GETemplate:loanForm:incomeChangesValue2");
            var tab = document.getElementById('GETemplate:GETemplate:mainForm:selectedList').value;

            if (incomeChangesValue.value.trim() == "YES") {
                document.getElementById(incomeChangesYes1).setAttribute("style", selectedStyle);
                document.getElementById(incomeChangesNo1).setAttribute("style", unSelectedStyle);
            } else if (incomeChangesValue.value.trim() == "NO") {
                document.getElementById(incomeChangesNo1).setAttribute("style", selectedStyle);
                document.getElementById(incomeChangesYes1).setAttribute("style", unSelectedStyle);
            }


            if (incomeChangesValue2.value.trim() == "YES") {
                document.getElementById(incomeChangesA2Yes1).setAttribute("style", selectedStyle);
                document.getElementById(incomeChangesA2No1).setAttribute("style", unSelectedStyle);
            } else if (incomeChangesValue2.value.trim() == "NO") {
                document.getElementById(incomeChangesA2No1).setAttribute("style", selectedStyle);
                document.getElementById(incomeChangesA2Yes1).setAttribute("style", unSelectedStyle);
            }


        }

        window.onload = function () {
            checkRequiredfields();
        }

    </script>
    <apex:composition template="{!$Site.Template}">
        <apex:define name="GEDDBody">
            <apex:stylesheet value="{!URLFOR($Resource.mobileoveride, '/css/mobile-overide.css')}" />
            <apex:stylesheet value="{!URLFOR($Resource.JQUERY10,'/jquery-ui-1.10.3.custom/css/redmond/jquery-ui-1.10.3.custom.min.css')}"
            />

            <!--Added by MDAVID - 02/29/2016 TQLQW - 104 Rebranding-->
            <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"
            />
            <!--<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>-->
            <!--Changed by TXU to reference internal static resource-->
            <link href="{!URLFOR($Resource.ge_web_template, '/ge_web_template/bower_components/bootstrap/dist/css/bootstrap.min.css')}"
                rel="stylesheet" media="screen" id="stylelink" />
            <c:App_WebAnalyticAttributes basecontroller="{!this}" />
            <!--Afreen - 26-SEPT-2016 - US-519   -->
            <header>
                <div id="header" class="header">
                    <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), false, true)}">
                        <div class="row-fluid header-inner headerlogovr">
                            <div class="mobilell">
                                <div class="loginlogout span3 removelmargin helplogindesk">
                                    <apex:form >
                                        <apex:pageBlock >
                                            <div class="span12 fleft">
                                                <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                <apex:commandButton value="{!$Label.CUI_header_save_application}" onclick="setNavigationFlag('false');headerButtons('register');"
                                                    styleClass="btn btn-block btn-normalc buttonarrowimg GPrimary-button" reRender="false"
                                                    rendered="{!NOT(isRegistered) && Not(isBrokerChannel)}" />
                                                <apex:commandButton value="{!$Label.CUI_header_logout}" onclick="setNavigationFlag('false');headerButtons('logout')" styleClass="btn btn-block btn-normalc buttonarrowimg GPrimary-button"
                                                    reRender="false" rendered="{!isRegistered}" />
                                            </div>
                                        </apex:pageBlock>
                                    </apex:form>
                                </div>
                            </div>
                        </div>
                    </apex:panelGroup>
                    <!-- START - Added by MDAVID - 03/01/2016 TQLQW - 104 Rebranding-->
                    <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), true, false)}">
                        <apex:panelGroup rendered="{!NOT(isRegistered) && Not(isBrokerChannel)}">
                            <div class="row-fluid header-inner headerlogovr">
                                <div class="mobilell">
                                    <div class="loginlogout span3 removelmargin helplogindesk">
                                        <apex:form >
                                            <apex:pageBlock >
                                                <div class="span12 fleft">
                                                    <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                    <button type="submit" onclick="setNavigationFlag('false');headerButtons('register'); return false;" class="btn btn-block btn-normalc btn-large GPrimary-button greenSave"
                                                        reRender="false">Save Application
                                                        <!--<span class="arrowrighticon" style="margin-left:20px"></span>-->
                                                    </button>
                                                </div>
                                            </apex:pageBlock>
                                        </apex:form>
                                    </div>
                                </div>
                            </div>
                        </apex:panelGroup>
                        <apex:panelGroup rendered="{!(isRegistered)}">
                            <div class="row-fluid header-inner headerlogovr" style="padding: 0 0 0 0 !important;">
                                <div class="mobilell">
                                    <div class="loginlogout span3 removelmargin helplogindesk">
                                        <apex:form >
                                            <apex:pageBlock >
                                                <div class="span12 fleft">
                                                    <button type="submit" onclick="setNavigationFlag('false');headerButtons('logout');return false;" class="btn btn-block btn-normalc btn-large greenSave"
                                                        reRender="false" style="float:right">Logout
                                                        <span class="arrowrighticon" style="margin-left:20px"></span>
                                                    </button>
                                                </div>
                                            </apex:pageBlock>
                                        </apex:form>
                                    </div>
                                </div>
                            </div>
                        </apex:panelGroup>
                    </apex:panelGroup>
                    <!--END - Added by MDAVID - 03/01/2016 TQLQW - 104 Rebranding-->
                </div>
                <div class="divider10"></div>
                <!-- created a separate header title for mobile version -->
                <div class="headertitle GHeader-title" style="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'display:block', 'display:none')}">
                    <h3 class="droid-normal dark main-page-header">Personal loan
                        <span class="clearright"></span>application</h3>
                </div>
            </header>
            <section>
                <!-- Added onSubmit attribute for Better Start Added by Suneel -->
                <apex:form id="loanForm" styleClass="validateLoanForm" onSubmit="return loanAmtBSAU() || hideIncomeError()">
                    <!-- Checkmarx -->
                    <!--<apex:inputField id="loanPurposeSize" value="{!loanPurposeSize}"/>-->
                    <apex:inputHidden id="loanPurposeSize" value="{!loanPurposeSize}" />
                    <apex:inputHidden id="incomeChangesValue" value="{!confirmIncomeChanges}" />
                    <apex:inputHidden id="incomeChangesValue2" value="{!confirmIncomeChangesA2}" />


                    <!-- Better Start -->
                    <apex:actionFunction name="loanTermSelect" action="{!getLoanTermOnProduct}" reRender="loan_selected" />
                    <apex:actionFunction name="productSelection" action="{!getProductOnLoanSelection}" rerender="product_selected" />

                    <!-- End -->
                    <apex:actionFunction name="validateLoan" action="{!validateLoanFields}" rerender="loanForm,loanValid" status="pleasewait"
                        oncomplete=" checkIncomeFields('Save'); showOtherLoanPurpose();adjustStyleSheets();" />

                    <!-- MLASALA 20-SEPT-16 TQLQW-483 Gen 2 App form -->
                    <!-- MLASALA 11-OCT-2016 Commented out and moved to APP_Main component to be resuable for all pages -->
                    <!--<apex:actionFunction name="validateLoanBack" action="{!validateLoanFields}" rerender="loanForm,loanValid" -->
                    <!--status="pleasewait" oncomplete=" checkIncomeFields('Back'); showOtherLoanPurpose();"/>-->

                    <apex:actionFunction name="UpdateAmount" action="{!calculateLoanAmountTotal}" reRender="Exp_total" oncomplete="showOtherLoanPurpose();"
                    />
                    <!--Added by MDAVID - 03/02/2016 TQLQW - 104 Rebranding-->
                    <apex:actionFunction name="addLoanPurpose" action="{!addLoanPurpose}" rerender="loanForm,loanPurposeSize,OtherPanelId" status="removeStatus"
                        onComplete="showOtherLoanPurpose();" />
                    <apex:actionFunction name="removeLoanPurpose" action="{!removeLoanPurpose}" rerender="loanForm,loanPurposeSize" rendered="{!if(loanPurposeSize >=2, true, false)}"
                        status="removeStatus" onComplete="showOtherLoanPurpose();" />
                    <div class="lp_area_mobile">
                        <!--Added by MDAVID - 03/16/2016 TQLQW - 104 Rebranding - For Mobile-->
                        <div class="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'lp_eligibility', 'maincontent lp_area lp_eligibility')}">
                            <div class="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'container-fluid headerbackground', 'row-fluid')}">
                                <div class="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'lp_area lp_eligibility', 'row-fluid span12 loanfields')}">
                                    <div class="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'row-fluid', '')}">
                                        <!-- Start of Content Here -->
                                        <div class="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'row-fluid span12', '')}">
                                            <div id="addfields" class="tablemainlist llfields {!if(OR($site.Name=='Latitude', $site.Name=='Gem'), 'width800', '')}">
                                                <div class="headertitle" style="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), 'display:block', 'display:none')}">
                                                    <h3 class="droid-normal dark main-page-header">Personal loan
                                                        <span class="clearright"></span>application</h3>
                                                </div>

                                                <!-- Start Loop-->
                                                <apex:repeat value="{!loanWrapList}" var="l" id="lw">
                                                    <!-- <apex:pageBlockSection id="Loan_Purpose__c-1"> -->
                                                    <c:APP_Main country="{!brand.country__c}" l="{!l}" id="component-1" />
                                                    <!-- </apex:pageBlockSection> -->
                                                </apex:repeat>
                                                <div class="clearfix"></div>
                                                <div id="countIcons" class="span12 adjustmeicon">
                                                    <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), false, true)}">
                                                        <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                        <div class="minusplusicon miconad GRemove-loan">
                                                            <apex:commandButton value=" " styleClass="minusfield" action="{!removeLoanPurpose}" rerender="loanForm,loanPurposeSize" rendered="{!if(loanPurposeSize >=2, true, false)}"
                                                                status="removeStatus" onComplete="showOtherLoanPurpose();" />
                                                        </div>
                                                        <div class="minusplusicon adconad mv_addicon">
                                                            <apex:commandButton value="" styleClass="plusfield" action="{!addLoanPurpose}" rerender="loanForm,loanPurposeSize" rendered="{!loanPurposeSize <=9}"
                                                                status="addStatus" oncomplete="showOtherLoanPurpose();" />
                                                        </div>
                                                    </apex:panelGroup>
                                                    <!-- Added by MDAVID - 02/29/2016 TQLQW - 104 Rebranding-->
                                                    <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), true, false)}">
                                                        <apex:panelGroup rendered="{!if(loanPurposeSize >=2, true, false)}">
                                                            <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                            <div class="minusplusicon miconad GRemove-loan">
                                                                <span class="minusicon" onclick="removeLoanPurpose()"></span>
                                                            </div>
                                                        </apex:panelGroup>
                                                        <apex:panelGroup rendered="{!loanPurposeSize <=9}">
                                                            <div class="minusplusicon adconad">
                                                                <span class="plusicon" onclick="addLoanPurpose()"></span>
                                                            </div>
                                                        </apex:panelGroup>
                                                    </apex:panelGroup>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <!-- addfields -->
                                        </div>

                                        <div class="clearfix"></div>
                                        <!-- Product dropdown better start-->
                                        <div class="span4" style="width: {!if($site.Name='Latitude','127px; font-size: 16px !important; color: #ffffff !important;','115px')};">
                                            <apex:outputLabel rendered="{!IF($CurrentPage.parameters.form == 'broker' && isBSOfferActive, true, false)}" styleClass="gem-subtitle"
                                                style="{!if($site.Name=='Latitude','color: #ffffff !important; font-family: Lexia Book !important; font-size: 16px !important;','')} margin-left:695px">Product</apex:outputLabel>
                                        </div>
                                        <apex:outputPanel rendered="{!IF($CurrentPage.parameters.form == 'broker' && isBSOfferActive, true, false)}" style="width:222px;margin:auto;margin-left:785px"
                                            layout="block" id="product_selected">
                                            <apex:selectList styleClass="input-block-level isPicklistLoanTerm dropdownicon checkPreviousFields removebmargin" size="1"
                                                value="{!productSelected}" onChange="selectLoanTerm()" id="Product_SubType_Selected">
                                                <apex:selectOptions value="{!productOptions}" />
                                            </apex:selectList>
                                            <!--  <apex:outputText styleClass="warningMessage" escape="false" rendered="{!loanTermNotValid}" value="You must select a loan term."/> -->
                                        </apex:outputPanel>
                                        <!-- End -->
                                        <!--- Better Start -->
                                        <apex:outputPanel rendered="{!IF($CurrentPage.parameters.subType== 'betterStart', true, false)}">
                                            <div id="demo" style="background-color:#CC0033 !important;width:500px;margin:auto;color:#ffffff !important;font-family:initital;padding-left:28px">
                                            </div>
                                        </apex:outputPanel>
                                        <!--- End --->
                                    </div>
                                </div>
                            </div>
                            <div class="container-fluid loanamountdiv">
                                <div class="maincontent">
                                    <div class="row-fluid">
                                        <div class="computation {!if(OR($site.Name=='Latitude', $site.Name=='Gem'), 'comp800', '')} overfieldFix2">
                                            <div class="span5 dbtotal">
                                                <span class="totalname">Total loan amount:</span>
                                                <span class="total">
                                                    <apex:outputText value="${0, number, ###,###,###,##0.00}" id="Exp_total">
                                                        <apex:param value="{!totAmount}" />
                                                    </apex:outputText>
                                                    <apex:outputText styleClass="warningMessage" escape="false" rendered="{!loanAmountNotValid}" value="<br/>Error: Your preferred loan amount must be at least ${!validLPAmount}."
                                                    />
                                                    <!--UPDATED by RCADAPAN @ 08-MAR-2016 to merge Valid Total Loan Amount per Region - TQLQW-29-->
                                                </span>

                                            </div>
                                            <div class="span6 overfield pull-right removelmargin">
                                                <div class="span4" style="{!if($site.Name=='Latitude','width:127px','width: 120px')}">
                                                    <apex:outputLabel styleClass="gem-subtitle">{!$Label.Over}</apex:outputLabel>
                                                </div>
                                                <div class="span6 input100pct" style="width: 164px">
                                                    <!-- Added the below OutPanel condition by Suneel BetterStart -->
                                                    <apex:outputPanel id="loan_selected" layout="block">
                                                        <apex:selectList styleClass="input-block-level isPicklistNone isPicklistLoanTerm dropdownicon" id="loanterm" size="1" value="{!loanTermSelected}">
                                                            <apex:selectOptions value="{!loanTermOptions}" />
                                                        </apex:selectList>
                                                        <apex:outputText styleClass="warningMessage" escape="false" rendered="{!loanTermNotValid}" value="Error: You must select a loan term."
                                                        />
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                        <!-- computation -->
                                    </div>
                                </div>
                                <!-- end maincontent -->
                            </div>
                            <!-- end continer-fluid -->
                        </div>
                    </div>
                    <script type="text/javascript">
                        function showOtherLoanPurpose() {
                            var loanrepeat = document.getElementById("GETemplate:GETemplate:loanForm:loanPurposeSize");
                            for (var i = 0; i < loanrepeat.value; i++) {
                                var purpose = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i
                                    + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c");
                                var other = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i
                                    + ":component-1:Loan_Purpose__c-mycomponent:OtherPanelId");

                                if (purpose.value == 'Other') {
                                    other.style.display = "block";
                                } else {
                                    other.style.display = "none";
                                }
                            }
                        }
                        showOtherLoanPurpose();
                        function selectLoanTerm() {
                            loanTermSelect();
                        }
                        function selectProductLoan() {
                            productSelection();
                        }
                    </script>
                </apex:form>

                <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                <apex:outputPanel rendered="{!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                    <c:LFS_ProgressIndicator />
                </apex:outputPanel>

                <div class="maincontent sidebar-left {!if($site.Name!='Latitude', 'mobileCon', '')} GMob-container">
                    <div class="row-fluid">

                        <!-- Start of Content Here -->

                        <!-- sidebar -->
                        <apex:outputPanel rendered="{!$site.Name=='Aussie'}">
                            <div class="span4 earlyfull sidebar dashboardarea">
                                <apex:form >
                                    <apex:insert name="GEDDSidebar">
                                        <c:GEDDSidebar />
                                    </apex:insert>
                                </apex:form>
                            </div>
                            <!-- span3 sidebar -->
                        </apex:outputPanel>

                        <!-- right column -->
                        <div class="{!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'), 'span12', 'span7')} earlyfull page-income {!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'),'width800','')}{!if(!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'),'width580','')}">
                            <!--- Commenting the height Sprint 4 
                        <apex:outputPanel rendered="{!$site.Name!='Gem'}">
                            <div class="divider40"></div>
                        </apex:outputPanel>--->

                            <!---  Sprint 4 - help text for time out session ---->
                            <div class="clearfix"></div>
                            <div>
                                <h5 style="color: #75787b; margin-bottom:5px;margin-left: 5px;">
                                    <apex:outputText rendered="{!Not(isBrokerChannel)}">Note your session will time out after 15 minutes of inactivity, we recommend you save
                                        your application</apex:outputText>
                                    <apex:outputText rendered="{!(isBrokerChannel)}">Note your session will timeout after 15 minutes of inactivity </apex:outputText>
                                </h5>
                            </div>


                            <div class="clearfix"></div>
                            <div class="clearfix" style="height:20px"></div>


                            <div class="divider10"></div>

                            <apex:form id="mainForm" styleClass="validateMainForm">
                                <!--- <div id="warning" title="Session timeout warning." style=" display: none;">
                              <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;">
                              </span>Please save your Application before session times out.</p>
                            </div>--->
                                <!-- Time out changed for Broker and Customer in Sprint 4 --->
                                <div id="warning" title="Do you want to continue?" style="display: none; font-size:11px !important; overflow:hidden;">
                                    <p style="font-size:14px !important;line-height:12px;">
                                        <span class="" style="float: left; margin: 0 0px 20px 0;font-size:11px !important;"></span>
                                        <apex:outputText rendered="{!(isBrokerChannel)}">This application will time out in 10 minutes.
                                            <br/>
                                            <br/> Please click OK to continue. </apex:outputText>
                                        <apex:outputText rendered="{!Not(isBrokerChannel)}">
                                            This application will time out in 10 minutes. Please click OK to continue.
                                            <br/>
                                            <br/> Note: If you wish to resume later please save your application.
                                        </apex:outputText>
                                    </p>
                                </div>
                                <apex:inputHidden id="navFlag" />
                                <apex:inputHidden id="flag" />
                                <!-- Checkmarx -->
                                <!--<apex:inputField id="redirectTxt" value="{!redirectTo}"/>-->
                                <!--<apex:inputField id="selectedList" value="{!selectedList}" />-->
                                <!--<apex:inputField id="selectedId" value="{!selectedRow}"/>-->
                                <!--<apex:inputField id="destinationPage" value="{!destinationPage}"/>-->
                                <!--<apex:inputField id="callingPage" value="{!callingPage}"/>-->
                                <!--<apex:inputField id="loanValid" value="{!loanValidationResults}"/>-->
                                <!--<apex:inputField id="blackBox" value="{!blackBox}"/>-->
                                <!--<apex:inputField id="appSize" value="{!appSize}"/>-->
                                <apex:inputHidden id="redirectTxt" value="{!redirectTo}" />
                                <apex:inputHidden id="selectedList" value="{!selectedList}" />
                                <apex:inputHidden id="selectedId" value="{!selectedRow}" />
                                <apex:inputHidden id="destinationPage" value="{!destinationPage}" />
                                <apex:inputHidden id="callingPage" value="{!callingPage}" />
                                <apex:inputHidden id="loanValid" value="{!loanValidationResults}" />
                                <apex:inputHidden id="blackBox" value="{!blackBox}" />
                                <apex:inputHidden id="appSize" value="{!appSize}" />
                                <!-- BEGIN MLASALA: 23-SEPT-15 - ASYNC TO SYNC CALL OUT -->
                                <apex:actionFunction name="validateApplication" action="{!validateApply}" rerender="errorId, blackBox" oncomplete="setNavigationFlag(null);submitServiceCall();"
                                />
                                <apex:actionFunction name="submitServiceCall" action="{!submitServiceCallCustomer}" />
                                <!-- END MLASALA: 23-SEPT-15 - ASYNC TO SYNC CALL OUT -->
                                <apex:actionFunction name="navigate" action="{!pageNavigation}" rerender="false" />
                                <apex:actionFunction name="validateIncome" action="{!pageRedirect}" rerender="errorId, incomePageBlock1, incomePageBlock2"
                                    status="pleasewait" onComplete="setNavigationFlag(null);" />
                                <apex:actionFunction name="getTotalIncomeMethod" action="{!getTotalIncome}" rerender="false" />
                                <apex:actionFunction name="addIncome" action="{!addIncome}" rerender="incomePageBlock1, incomePageBlock2, income2Repeat, incomeRepeat"
                                    status="pleasewait" oncomplete="return false;" />
                                <!--<apex:actionFunction name="addIncome" action="{!addIncome}" 
                            rerender="incomePageBlock1, incomePageBlock2, income2Repeat, incomeRepeat" 
                            status="pleasewait" oncomplete="validateForm(); return false;"/>-->
                                <apex:actionFunction name="setTab" action="{!setApplicantTab}" />
                                <apex:actionFunction name="removeIncome" action="{!removethisIncome}" rerender="incomePageBlock1, incomePageBlock2" status="pleasewait"
                                />
                                <!-- Added to backlog 06/23 mlasala
                            <apex:actionFunction name="removeAllIncome" action="{!removeAllIncome}" 
                            rerender="incomePageBlock1" oncomplete="hideIncome(1);" status="pleasewait"/>
                            <apex:actionFunction name="removeAllIncome2" action="{!removeAllIncome}" 
                            rerender="incomePageBlock2" oncomplete="hideIncome(2);" status="pleasewait"/> -->
                                <apex:actionFunction name="headerRegister" action="{!register}" />
                                <apex:actionFunction name="headerLogout" action="{!logout}" />
                                <apex:pageBlock id="incomePageBlock">

                                    <div class="tabbable mobileCon">
                                        <h2 class="gem-heading">Employment
                                            <apex:outputText rendered="{!!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                                                and Income</apex:outputText>
                                        </h2>
                                        <apex:pageMessages id="errorId" />

                                        <ul id="tabs" class="nav nav-tabs">
                                            <li id="liId" onclick="setList('1');" class="active">
                                                <a style="width: 100%" href="#tab1" data-toggle="tab">
                                                    <span>{!applicant.First_Name__c}</span>
                                                </a>
                                            </li>
                                            <li id="li2Id" onclick="setList('2');">
                                                <a style="width: 100%" href="#tab2" data-toggle="tab">
                                                    <span>{!applicant2.First_Name__c}</span>
                                                </a>
                                            </li>
                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane active" id="tab1">
                                                <apex:outputPanel rendered="{!applicantList.size>1}">
                                                    <br/>
                                                    <!-- ADDED by RUSSELL CADAPAN -->
                                                    <apex:outputPanel rendered="{!if($site.Name = 'Latitude', true, false)}">
                                                        <p id="subtitle1Id">We earn this income after tax</p>
                                                        <br />
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                                <apex:pageBlock id="incomePageBlock1">
                                                    <div class="{!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'), 'span12', 'span6')} removelmargin mv_phone_p_c2_1 mv_paddingleft_1per lfs_inc_input input100pct">
                                                        <label class="pix40 labeldark normaltext">Employment Status</label>
                                                        <apex:outputPanel id="primaryIncomeSource2">
                                                            <!-- Removed by Tony Xu for DBHZL-34 
                                                     <apex:selectList size="1" 
                                                     value="{!applicant.Primary_Employment_Status__c}" 
                                                     styleClass="isPicklistNone">
                                                         <apex:selectOptions value="{!employmentStatusOptions}"/>
                                                     </apex:selectList>
                                                     -->
                                                            <apex:inputField id="a1PrimaryEmploymentStatusPick" value="{!applicant.Primary_Employment_Status__c}" styleClass="isPicklistPrimaryEmployType marginbottom10"
                                                                onblur="$j(this).valid();" />
                                                            <div class="clearfix"></div>
                                                            <apex:outputLabel styleClass="warningMessage" rendered="{!employmentStatusValid}" value="Please select your primary employment status"
                                                            />
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="divider20"></div>

                                                    <div class="clearfix"></div>
                                                    <apex:outputPanel rendered="{!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                                                        <!--<apex:outputPanel rendered="{!$Site.Name=='Latitude'}">
                                                    <hr class="dividerStyle" />
                                                </apex:outputPanel>-->
                                                        <div class="span12 removelmargin">
                                                            <h3 class="subpagetitle gecolor gem-heading">
                                                                <span>Income</span>
                                                            </h3>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div id="income1Section">
                                                        <apex:variable value="{!-1}" var="rowNum" />
                                                        <apex:variable value="{!incomeAddList.size}" var="rowSize" />
                                                        <apex:repeat value="{!incomeAddList}" var="incomeWrap" id="incomeRepeat">
                                                            <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                                            <apex:outputPanel id="Income__c-1">
                                                                <c:APP_JointIncome incomeWrap="{!incomeWrap}" applicationCountry="{!brand.country__c}" listSize="{!incomeAddList.size}" id="component-1"
                                                                    incomeSlot="{!FLOOR(rowNum)}" incomeList="1" />
                                                            </apex:outputPanel>
                                                        </apex:repeat>

                                                        <div class="clearfix"></div>
                                                        <div class="fieldbottom"></div>
                                                        <div class="divider10"></div>
                                                        <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), false, true)}">
                                                            <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                            <apex:commandButton id="btnAdd" value="Add additional income" styleClass="btn btn-large btn-block btn-addc btn-addanother GAdd-income"
                                                                onclick="setList('1');" oncomplete="addIncome();" rerender="false"
                                                                rendered="{!if(incomeListSize <=9, true, false)}" status="pleasewait"
                                                            />
                                                        </apex:panelGroup>
                                                        <!-- Added by MDAVID - 02/29/2016 TQLQW - 104 Rebranding-->
                                                        <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), true, false)}">
                                                            <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                            <button type="button" id="btnAdd" class="btn btn-large btn-block GAdd-income" onclick="setList('1');addIncome();" rerender="false"
                                                                rendered="{!if(incomeListSize <=9, true, false)}" status="pleasewait">Add additional income
                                                                <span class="addanothericon" style="margin-left:20px"></span>
                                                            </button>
                                                        </apex:panelGroup>
                                                        <div class="clearfix"></div>
                                                        <apex:outputPanel rendered="{!if(OR($site.Name = 'Kiwibank', $site.Name = 'Gem'), true, false)}">
                                                            <!-- Responsible Lending -->

                                                            <div class='gem-mobile-style' style="float:left;width: 589px;" id="incChanges">
                                                                <hr/>
                                                                <label class="pix40 labeldark normaltext" style="font-size:19px">Are you aware of any changes in near future that may reduce
                                                                    your income?</label>

                                                                <apex:outputLabel value="YES" styleClass="slds-button slds-button--neutral gem-mobile-style-flabel" id="incomeChangesYes1" onclick="incomeChangesConfirmation(this);hideIncomeError();"
                                                                    style="{!if(AND($site.Name == 'Gem',confirmincomechange1=='YES'),'color: #fff; background:#4465ad; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;',if(AND($site.Name == 'Kiwibank',confirmincomechange1=='YES'),'color: #fff; background:#88C83D; border: 1px solid #88C83D !important;padding:3px 55px;margin-left:35px;','color: #969696; background:#ffffff; border: 1px solid #969696 !important;padding:3px 55px;margin-left:35px;'))}"
                                                                />
                                                                <apex:outputLabel value="NO" styleClass="slds-button slds-button--neutral" id="incomeChangesNo1" onclick="incomeChangesConfirmation(this);hideIncomeError();"
                                                                    style="{!if(AND($site.Name == 'Gem',confirmincomechange1=='NO'),'color: #fff; background:#4465ad; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;',if(AND($site.Name == 'Kiwibank',confirmincomechange1=='NO'),'color: #fff; background:#88C83D; border: 1px solid #88C83D !important;padding:3px 55px;margin-left:35px;','color: #969696; background:#ffffff; border: 1px solid #969696 !important;padding:3px 55px;margin-left:35px;'))}"
                                                                />
                                                                <div id="incomeChangesMessage" style="display:none;font-size:18px;" />
                                                                <apex:inputText style="visibility:hidden;height:0;width:0" id="confirmincomechange1" value="{!confirmincomechange1}" styleClass=""
                                                                />
                                                                <div id="incomeOneErr" style="display:none;" />
                                                                <apex:outputLabel styleClass="warningMessage" rendered="{!isIncomeRedundancyValid}" value="Please select an option" />

                                                                <hr/>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- End -->
                                                    </div>

                                                    <div class="clearfix"></div>
                                                    <div class="divider10"></div>

                                                    <div class="divider10"></div>
                                                    <!--<div class="span12 removelmargin">
                                                <h3 class="subpagetitle sptline gecolor"><span>Previous Employment</span></h3>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="divider10"></div>-->
                                                    <!-- Added to backlog 06/23 mlasala
                                            <div class="fright labelrightdark2">
                                                <label class="checkbox" for="checkbox">
                                                    <apex:inputCheckbox id="Applicant__c___Income_Exempt__c" 
                                                    value="{!applicant.Income_Exempt__c}" onclick="removeAllIncome();"/>
                                                    I don't have income to declare
                                                </label>
                                            </div><br />-->
                                                    <!-- Moved the Previous Employment Section-->
                                                    <div class="divider20"></div>
                                                    <div class="clearfix"></div>
                                                    <h2 class="gem-heading">Previous Employment</h2>
                                                    <apex:outputPanel styleClass="{!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'), 'span12', 'span6')} removelmargin mv_phone_p_c2_1 mv_paddingleft_2per lfs_inc_input input100pct"
                                                        layout="block" rendered="{!$ObjectType.Applicant__c.fields.Previous_Employment_Status__c.Accessible}">

                                                        <label class="pix40 labeldark normaltext">Your previous employment (optional)
                                                        </label>

                                                        <!-- removed for DBHZL-34 
                                                    <apex:selectList size="1" 
                                                    value="{!applicant.Previous_Employment_Status__c}">
                                                         <apex:selectOptions value="{!preEmploymentStatusOptions}"/>
                                                     </apex:selectList>
                                                     -->

                                                        <apex:inputField id="a1PreviousEmploymentStatusPick" value="{!applicant.Previous_Employment_Status__c}" />
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpStatusValid}" value="Please select your previous employment status"
                                                        />
                                                        <div class="clearfix"></div>
                                                    </apex:outputPanel>
                                                    <div class="clearfix"></div>

                                                    <!-- Previous Employer Name -->
                                                    <apex:outputPanel layout="block" rendered="{!$ObjectType.Applicant__c.fields.Prev_Emp_Bus_Name__c.Accessible}" styleClass="lfs_inc_input input100pct">
                                                        <label class="pix40 labeldark normaltext">
                                                            Previous Employer Business Name</label>
                                                        <apex:inputField styleClass="input-block-level" value="{!applicant.Prev_Emp_Bus_Name__c}" />
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpNameValid}" value="Please enter your previous employer's business name"
                                                        />
                                                        <div class="clearfix"></div>
                                                    </apex:outputPanel>


                                                    <apex:outputPanel styleClass="span6 removelmargin mv_phone_p_c2_1 mv_paddingleft_2per lfs_inc_input input100pct" layout="block"
                                                        rendered="{!$ObjectType.Applicant__c.fields.Time_at_previous_employer_years__c.Accessible}">

                                                        <label class="pix40 labeldark normaltext">
                                                            Time at previous employer
                                                            <apex:outputText rendered="{!!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                                                                (years)</apex:outputText>
                                                        </label>
                                                        <apex:inputField type="number" styleClass="input-block-level isNumber isEmployerYears" value="{!applicant.Time_at_previous_employer_years__c}"
                                                            html-placeholder="Years" html-maxlength="2" onkeypress="return isNumberKey(event, this)"
                                                        />
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpYearValid}" value="Please enter time at previous employer (years)"
                                                        />
                                                        <div class="clearfix"></div>
                                                    </apex:outputPanel>

                                                    <div class="gem-mobile">
                                                        <apex:outputPanel styleClass="span6 mv_phone_p_c2_1 lfs_inc_input input100pct" layout="block" rendered="{!$ObjectType.Applicant__c.fields.Time_at_previous_employer_months__c.Accessible}">

                                                            <label class="pix40 labeldark normaltext incomeSpacer">
                                                                <apex:outputText rendered="{!!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">Time at previous employer (months)</apex:outputText>&nbsp;</label>
                                                            <apex:inputField type="number" styleClass="input-block-level number isValidMonths isEmployerMonths" value="{!applicant.Time_at_previous_employer_months__c}"
                                                                html-placeholder="Months" html-maxlength="2" onkeypress="return isNumberKey(event, this)"
                                                            />
                                                            <div class="clearfix"></div>
                                                            <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpMonthValid}" value="Please enter time at previous employer (months)"
                                                            />
                                                            <apex:outputLabel styleClass="warningMessage" rendered="{!invalidPreEmployerMonth}" value="Please enter a valid number of months"
                                                            />

                                                        </apex:outputPanel>
                                                    </div>

                                                    <div class="divider20"></div>
                                                    <div class="clearfix"></div>

                                                </apex:pageBlock>
                                            </div>
                                            <!-- tab-pane -->

                                            <div class="tab-pane" id="tab2">
                                                <br/>
                                                <apex:outputPanel rendered="{!if($site.Name = 'Latitude', true, false)}">
                                                    <p id="subtitle2Id">We earn this income after tax</p>
                                                </apex:outputPanel>
                                                <!--  <br /> -->

                                                <apex:pageBlock id="incomePageBlock2">
                                                    <div class="{!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'), 'span12', 'span6')} removelmargin mv_phone_p_c2_1 mv_paddingleft_1per input100pct">
                                                        <label class="pix40 labeldark normaltext">Employment Status
                                                        </label>
                                                        <apex:outputPanel id="primaryIncomeSource2">
                                                            <!-- Removed for DBHZL34 
                                                     <apex:selectList size="1" 
                                                     value="{!applicant2.Primary_Employment_Status__c}" 
                                                     styleClass="isPicklistNone">
                                                         <apex:selectOptions value="{!employmentStatusOptions}"/>
                                                     </apex:selectList>
                                                     -->

                                                            <apex:inputField id="a2PrimaryEmploymentStatusPick" styleClass="isPicklistNone" value="{!applicant2.Primary_Employment_Status__c}"
                                                            />
                                                            <div class="clearfix"></div>
                                                            <apex:outputLabel styleClass="warningMessage" rendered="{!employmentStatusValid2}" value="Please select your primary employment status"
                                                            />
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="divider20"></div>



                                                    <!-- Added to backlog 06/23 mlasala
                                            <div class="fright labelrightdark2">
                                                <label class="checkbox" for="checkbox">
                                                    <apex:inputCheckbox id="applicant2IncomeExempt" 
                                                    value="{!applicant2IncomeExempt}" onclick="removeAllIncome2();"/>
                                                    I don't have income to declare
                                                </label>
                                            </div><br /> -->
                                                    <apex:outputPanel rendered="{!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                                                        <div class="divider40"></div>
                                                        <h2 class="gem-heading">Income</h2>
                                                    </apex:outputPanel>
                                                    <div id="income2Section">
                                                        <apex:variable value="{!-1}" var="rowNum2" />
                                                        <apex:variable value="{!incomeAddList2.size}" var="rowSize2" />
                                                        <apex:repeat value="{!incomeAddList2}" var="incomeWrap" id="income2Repeat">
                                                            <apex:outputPanel id="Income__c-2">
                                                                <apex:variable var="rowNum2" value="{!rowNum2 + 1}" />
                                                                <c:APP_JointIncome incomeWrap="{!incomeWrap}" listSize="{!incomeAddList2.size}" applicationCountry="{!brand.country__c}"
                                                                    id="component-2" incomeSlot="{!FLOOR(rowNum2)}" incomeList="2"
                                                                />
                                                            </apex:outputPanel>
                                                        </apex:repeat>

                                                        <div class="clearfix"></div>
                                                        <div class="fieldbottom"></div>
                                                        <div class="divider10"></div>
                                                        <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), false, true)}">
                                                            <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                            <apex:commandButton id="btnAdd" value="Add additional income" styleClass="btn btn-large btn-block btn-addc btn-addanother GAdd-income"
                                                                onclick="setList('2');" oncomplete="addIncome();" rerender="false"
                                                                rendered="{!if(incomeListSize <=9, true, false)}" status="pleasewait"
                                                            />
                                                        </apex:panelGroup>
                                                        <!-- Added by MDAVID - 02/29/2016 TQLQW - 104 Rebranding-->
                                                        <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), true, false)}">
                                                            <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                            <button type="button" id="btnAdd" class="btn btn-large btn-block GAdd-income" onclick="setList('2'); addIncome();" rerender="false"
                                                                rendered="{!if(incomeListSize <=9, true, false)}" status="pleasewait">Add additional income
                                                                <span class="addanothericon" style="margin-left:20px"></span>
                                                            </button>
                                                        </apex:panelGroup>
                                                        <div class="clearfix"></div>
                                                        <apex:outputPanel rendered="{!if(OR($site.Name = 'Kiwibank', $site.Name = 'Gem'), true, false)}">

                                                            <div style="float:left;width: 589px !important;" id="incChanges">
                                                                <hr/>
                                                                <label style="font-size:19px">Are you aware of any changes in near future that may reduce
                                                                    your income?</label>
                                                                <apex:outputLabel value="YES" styleClass="slds-button slds-button--neutral" id="incomeChangesYes1" onclick="incomeChangesConfirmation(this);hideIncomeError();"
                                                                    style="{!if(AND($site.Name == 'Gem',confirmincomechange2=='YES'),'color: #fff; background:#4465ad; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;',if(AND($site.Name == 'Kiwibank',confirmincomechange2=='YES'),'color: #fff; background:#88C83D; border: 1px solid #88C83D !important;padding:3px 55px;margin-left:35px;','color: #969696; background:#ffffff; border: 1px solid #969696 !important;padding:3px 55px;margin-left:35px;'))}"
                                                                />
                                                                <apex:outputLabel value="NO" styleClass="slds-button slds-button--neutral" id="incomeChangesNo1" onclick="incomeChangesConfirmation(this);hideIncomeError();"
                                                                    style="{!if(AND($site.Name == 'Gem',confirmincomechange2=='NO'),'color: #fff; background:#4465ad; border: 1px solid #4465ad !important;padding:3px 55px;margin-left:35px;',if(AND($site.Name == 'Kiwibank',confirmincomechange2=='NO'),'color: #fff; background:#88C83D; border: 1px solid #88C83D !important;padding:3px 55px;margin-left:35px;','color: #969696; background:#ffffff; border: 1px solid #969696 !important;padding:3px 55px;margin-left:35px;'))}"
                                                                />
                                                                <apex:inputText style="visibility:hidden;height:0;width:0" id="confirmincomechange2" value="{!confirmincomechange2}" styleClass=""
                                                                />
                                                                <div id="incomeOneErr1" style="display:none;" />
                                                                <div id="incomeChangesMessageA2" style="display:none;font-size:18px;" />
                                                                <apex:outputLabel styleClass="warningMessage" rendered="{!isIncomeRedundancyValidA2}" value="Please select an option" />
                                                                <hr/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>

                                                    <div class="clearfix"></div>
                                                    <div class="divider10"></div>
                                                    <!--<div class="clearfix"></div>
                                            <div class="divider10"></div>
                                            <div class="span12 removelmargin">
                                                <h3 class="subpagetitle sptline gecolor"><span>Previous Employment</span></h3>
                                            </div>-->
                                                    <!-- Moved Secondary Previous Employment Type-->
                                                    <div class="divider20"></div>
                                                    <div class="clearfix"></div>
                                                    <h2 class="gem-heading">Previous Employment</h2>
                                                    <apex:outputPanel styleClass="{!if(OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank'), 'span12', 'span6')} removelmargin mv_phone_p_c2_1 mv_paddingleft_2per input100pct">
                                                        <label class="pix40 labeldark normaltext">Your previous employment (optional)</label>
                                                        <!-- Added for DBHZL34 -->
                                                        <apex:outputPanel id="previousEmploymentStat">
                                                            <apex:inputField id="a2PreviousEmploymentStatusPick" value="{!applicant2.Previous_Employment_Status__c}" />
                                                            <div class="clearfix"></div>
                                                            <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpStatusValid2}" value="Please select your previous employment status"
                                                            />
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <div class="clearfix"></div>

                                                    <!-- Previous Employer Name -->
                                                    <apex:outputPanel layout="block" rendered="{!$ObjectType.Applicant__c.fields.Prev_Emp_Bus_Name__c.Accessible}" styleclass="input100pct">
                                                        <label class="pix40 labeldark normaltext">Previous Employer Business Name
                                                        </label>
                                                        <apex:inputField styleClass="input-block-level" value="{!applicant2.Prev_Emp_Bus_Name__c}" />
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpNameValid2}" value="Please enter your previous employer's business name"
                                                        />
                                                        <div class="clearfix"></div>
                                                    </apex:outputPanel>

                                                    <apex:outputPanel styleClass="span6 removelmargin mv_phone_p_c2_1 mv_paddingleft_2per input100pct" rendered="{!$ObjectType.Applicant__c.fields.Time_at_previous_employer_years__c.Accessible}">
                                                        <label class="pix40 labeldark normaltext">Time at previous employer
                                                            <apex:outputText rendered="{!!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">
                                                                (years)</apex:outputText>
                                                        </label>
                                                        <apex:inputField styleClass="input-block-level number" value="{!applicant2.Time_at_previous_employer_years__c}" onkeypress="return isNumberKey(event, this)"
                                                            html-placeholder="Years" />
                                                        <div class="clearfix"></div>
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpYearValid2}" value="Please enter time at previous employer (years)"
                                                        />
                                                    </apex:outputPanel>

                                                    <apex:outputPanel styleClass="span6 mv_phone_p_c2_1 input100pct" rendered="{!$ObjectType.Applicant__c.fields.Time_at_previous_employer_months__c.Accessible}">
                                                        <label class="pix40 labeldark normaltext">
                                                            <apex:outputText rendered="{!!OR($site.Name=='Latitude', $site.Name=='Gem', $site.Name=='Kiwibank')}">Time at previous employer (months)</apex:outputText>&nbsp;</label>
                                                        <apex:inputField styleClass="input-block-level number" value="{!applicant2.Time_at_previous_employer_months__c}" onkeypress="return isNumberKey(event, this)"
                                                            html-placeholder="Months" />
                                                        <div class="clearfix"></div>
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!!previousEmpMonthValid2}" value="Please enter time at previous employer (months)"
                                                        />
                                                        <apex:outputLabel styleClass="warningMessage" rendered="{!invalidPreEmployerMonth2}" value="Please enter a valid number of months"
                                                        />
                                                    </apex:outputPanel>
                                                </apex:pageBlock>
                                                <div class="divider20"></div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <!-- tab-pane 2-->
                                        </div>
                                        <!-- tab-content -->

                                    </div>
                                    <!-- tabbable -->

                                    <!-- Loading -->
                                    <apex:actionStatus id="pleasewait" layout="block">
                                        <apex:facet name="start">
                                            <apex:image url="{!URLFOR($Resource.getheme, 'images/loading-bar.gif')}" styleClass="fright" />
                                        </apex:facet>
                                    </apex:actionStatus>
                                    <div class="divider10"></div>

                                    <div class="row-fluid marginlftzero">
                                        <div class="span12">
                                            <!-- MLASALA 11-OCT-2016 Updated previous button properties for all pages -->
                                            <!--onclick="setNavigationFlag('false'); lockoutSubmit(this); if(validateForm()){UpdateAmount(); validateLoanBack(); return false;}"-->
                                            <apex:commandButton value="Previous" onclick="checkFields('.tab-content');" status="saveStatus" styleClass="btn btn-block btn-large btn-reset-m btn-normalc fleft buttonarrowimgleft GPrimary-button lfs-prev-btn"
                                                rerender="false" />
                                            <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), false, true)}">
                                                <apex:panelGroup >
                                                    <!-- reBrand by gerome.teodosio@cloudsherpas.com -->
                                                    <apex:commandButton onclick="setNavigationFlag('false'); lockoutSubmit(this);  if(validateForm()){UpdateAmount();validateLoan();};"
                                                        value="Continue" status="saveStatus" styleClass="btn btn-block btn-large btn-reset-m btn-normalc fright buttonarrowimg GPrimary-button lfs-next-btn"
                                                        rerender="false">
                                                        <span class="arrowrighticon" style="margin-left:20px"></span>
                                                    </apex:commandButton>
                                                </apex:panelGroup>
                                            </apex:panelGroup>
                                            <!-- Added by MDAVID - 02/29/2016 TQLQW - 104 Rebranding-->
                                            <apex:panelGroup rendered="{!if(OR($site.Name = 'Latitude', $site.Name = 'Gem'), true, false)}">
                                                <!--<button type="submit" onclick="setNavigationFlag('false'); lockoutSubmit(this);  if(validateForm()){UpdateAmount(); validateLoan(); return false};" -->
                                                <!--status="saveStatus" -->
                                                <!--class="btn btn-block btn-large btn-reset-m btn-normalc fright" -->
                                                <!-->Next-->
                                                <!--<span class="arrowrighticon" style="margin-left:20px"></span></button>-->
                                                <apex:commandButton onclick="setNavigationFlag('false'); lockoutSubmit(this);  if(validateForm()){UpdateAmount();validateLoan();};"
                                                    value="Continue" status="saveStatus" style="{!if($site.Name=='Gem', 'width: 150px !important;', '')}"
                                                    styleClass="btn btn-block btn-large btn-reset-m btn-normalc fright buttonarrowimg GPrimary-button lfs-next-btn"
                                                    rerender="false" />
                                            </apex:panelGroup>
                                        </div>
                                    </div>

                                    <div class="divider10"></div>
                                    <div class="clearfix"></div>



                                </apex:pageBlock>
                            </apex:form>

                        </div>
                        <!-- span7 earlyfull -->

                        <!-- End of Content -->
                    </div>
                </div>
                <!-- end maincontent -->
            </section>
        </apex:define>
    </apex:composition>

    <script>
        //  && {!isSoftQuoteFlow}
        function warningIncomefrom() {
            console.log('...{!isSoftQuoteFlow}...' + {!isSoftQuoteFlow});
        var strId = '{!$CurrentPage.parameters.Id}';
        if (strId != null && strId != '' && {!isSoftQuoteFlow}) {
            $('#warningIncomefromMsg').show(10, function () {
                setTimeout(function () {
                    $('#warningIncomefromMsg').html(function () {
                        setTimeout(function () {
                            if ({!isBrokerQuote                        
}){
                            $('#warningIncomefromMsg').html('This information has been considered when you completed your quote. If you modify these details, your client&apos;s quoted interest rate may change.');
                        }else {
                            $('#warningIncomefromMsg').html('This information has been considered when you completed your quote. If you modify these details, your quoted interest rate may change.');
                        }
                    }, 0);
                    setTimeout(function () {
                        $('#warningIncomefromMsg').fadeOut();
                    }, 15000);
                });
            }, 0);
        });
            }
        }

        function warningOccupation() {
            var strId = '{!$CurrentPage.parameters.Id}';
            if (strId != null && strId != '' && {!isNZOccupationQuote        
}) {
            $('#warningOccupationMsg').show(10, function () {
                setTimeout(function () {
                    $('#warningOccupationMsg').html(function () {
                        setTimeout(function () {
                            if ({!isBrokerQuote                        
}){
                            $('#warningOccupationMsg').html('This information has been considered when you completed your quote. If you modify these details, your client&apos;s quoted interest rate may change.');
                        }else {
                            $('#warningOccupationMsg').html('This information has been considered when you completed your quote. If you modify these details, your quoted interest rate may change.');
                        }
                    }, 0);
                    setTimeout(function () {
                        $('#warningOccupationMsg').fadeOut();
                    }, 15000);
                });
            }, 0);
        });
            }
        }

        function warningEmployerYears() {
            var strId = '{!$CurrentPage.parameters.Id}';
            if (strId != null && strId != '' && {!isSoftQuoteFlow        
}) {
            $('#warningEmployerYearsMsg').show(10, function () {
                setTimeout(function () {
                    $('#warningEmployerYearsMsg').html(function () {
                        setTimeout(function () {
                            if ({!isBrokerQuote                        
}){
                            $('#warningEmployerYearsMsg').html('This information has been considered when you completed your quote. If you modify these details, your client&apos;s quoted interest rate may change.');
                        }else {
                            $('#warningEmployerYearsMsg').html('This information has been considered when you completed your quote. If you modify these details, your quoted interest rate may change.');
                        }
                    }, 0);
                    setTimeout(function () {
                        $('#warningEmployerYearsMsg').fadeOut();
                    }, 15000);
                });
            }, 0);
        });
            }
        }

        function warningEmployerMonths() {
            var strId = '{!$CurrentPage.parameters.Id}';
            if (strId != null && strId != '' && {!isSoftQuoteFlow        
}) {
            $('#warningEmployerMonthsMsg').show(10, function () {
                setTimeout(function () {
                    $('#warningEmployerMonthsMsg').html(function () {
                        setTimeout(function () {
                            if ({!isBrokerQuote                        
}){
                            $('#warningEmployerMonthsMsg').html('This information has been considered when you completed your quote. If you modify these details, your client&apos;s quoted interest rate may change.');
                        }else {
                            $('#warningEmployerMonthsMsg').html('This information has been considered when you completed your quote. If you modify these details, your quoted interest rate may change.');
                        }
                    }, 0);
                    setTimeout(function () {
                        $('#warningEmployerMonthsMsg').fadeOut();
                    }, 15000);
                });
            }, 0);
        });
            }
        }

    </script>

    <!-- Hotjar Tracking Code for www.latitudefinancial.com.au -->
    <script>
        (function (h, o, t, j, a, r) {
            h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };
            h._hjSettings = { hjid: 826763, hjsv: 6 };
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script'); r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>
    <script>
        // Created by: Adrian Recio
        // Description: Function to disable/enable button onprocess events
        var j$ = jQuery.noConflict();
        function lockoutSubmit(button) {
            var oldValue = button.value;

            button.setAttribute('disabled', true);
            //button.value = 'Next';

            setTimeout(function () {
                button.value = oldValue;
                button.removeAttribute('disabled');
            }, 5000)
        }

        function pageRedirect(pageref) {
            var callingtile = pageref.value;
            document.getElementById("GETemplate:GETemplate:mainForm:destinationPage").value = callingtile;
            document.getElementById("GETemplate:GETemplate:mainForm:callingPage").value = 'Income';
            document.getElementById('GETemplate:GETemplate:mainForm:flag').value = false;
            navigate();
        }

        function isAlNumericWithHyphen(evt, field) {
            var charCode = (evt.which) ? evt.which : event.keyCode;
            if ((charCode == 8 || charCode == 45 || charCode == 8 || charCode == 189 ||
                charCode == 39 || charCode == 32 || ((
                    charCode >= 65 && charCode <= 90) || (charCode >= 97 &&
                        charCode <= 122) || (charCode >= 48 && charCode <=
                            57))))
                return true;
            return false;
        }

        function isNumberKey(evt, field) {
            var charCode = (evt.which) ? evt.which : event.keyCode;
            if (charCode != 46 && charCode > 31
                && (charCode < 48 || charCode > 57))
                return false;
            if (charCode == 46) return false;
            return true;
        }

        function isNumberDecimalKey(evt, field) {
            var charCode = (evt.which) ? evt.which : event.keyCode;
            if (charCode != 46 && charCode > 31
                && (charCode < 48 || charCode > 57))
                return false;
            return true;
        }

        function isAlNumeric(evt, field, maxlimit) {
            var charCode = (evt.which) ? evt.which : event.keyCode;
            if ((charCode == 45 || ((charCode >= 65 && charCode <= 90) || (charCode >= 97 &&
                charCode <= 122) || (charCode >= 48 && charCode <= 57))) && field.value.length < maxlimit)
                return true;

            return false;
        }

        function executeLoad() {
            countDown();
            checkTabs();
            showOtherLoanPurpose();
            checkRequiredfields();
            //MLASALA 11-OCT-2016 Populate onload array
            onLoadValues = populateOnLoadvalues('.tab-content');
        }
        var timeout = "{!TimeOut}";
        var warning = "{!Warning}";
        var timeoutGap = timeout - warning;
        var originalTimeOut = timeout;

        j$(document).ready(function () {
            //Zero the idle timer on mouse movement or keypress.
            j$('#warning').dialog(undefined);
            j$('#warning').dialog().dialog('close');

            j$(this).mousemove(function (e) {
                timeout = originalTimeOut;
                // j$('#warning').dialog('close');
            });
            j$(this).keypress(function (e) {
                timeout = originalTimeOut;
                // j$('#warning').dialog('close');
            });
        });

        function countDown() {
            if (timeout <= 0) {
                setNavigationFlag("false");
                checkIncomeFields('Timeout');
            } else {
                timeout--;
                if (timeout == timeoutGap) {
                    //alert('Please save your Application before session times out');
                    j$(function () {
                        j$("#warning").dialog({
                            resizable: false,
                            height: 180,
                            modal: true,
                            buttons: {
                                "OK": function () {
                                    j$(this).dialog("close");
                                }
                            }
                        });
                    });
                }
                setTimeout("countDown()", 1000);
            }
        }

        function checkIncomeFields(action) {
            document.getElementById('GETemplate:GETemplate:mainForm:redirectTxt').value = action;
            document.getElementById('GETemplate:GETemplate:mainForm:flag').value = false;
            validateIncome();
        }

        function setList(list) {
            document.getElementById('GETemplate:GETemplate:mainForm:selectedList').value = list;
        }

        function getTotalScript(list) {
            document.getElementById('GETemplate:GETemplate:mainForm:selectedList').value = list;
            getTotalIncomeMethod();
        }

        function checkTabs() {
            if ({!JSEncode(TEXT(applicantList.size))
        }> 1) { //UPDATED 20-AUG-2015 DYU - CODE SCAN FIX ADDED JSENCODE
            document.getElementById("tabs").children[1].style.display = "block";
        } else {
            document.getElementById("tabs").children[0].style.display = "none";
            document.getElementById("tabs").children[1].style.display = "none";
        }
        setList(1);
        // hideIncome(1);
        if ({!JSEncode(TEXT(applicantList.size))}> 1) { //UPDATED 20-AUG-2015 DYU - CODE SCAN FIX ADDED JSENCODE
            // hideIncome(2);
            setList(1);
        }
        }

        function deleteRow(Id) {
            document.getElementById('GETemplate:GETemplate:mainForm:selectedId').value = Id;
            removeIncome();
        }

        //Added to backlog 06/23 mlasala
        // function hideIncome(list){
        //     setList(list);
        //     var exemptIndicator = '';
        //     if(list == 1){
        //         exemptIndicator = document.getElementById('GETemp
        //late:GETemplate:mainForm:incomePageBlock:incomePageBlock1:Applicant__c___Income_Exempt__c');
        //     } else if(list == 2){
        //         exemptIndicator = document.getElementById('GETemplate:GETemplate:mainForm:
        //incomePageBlock:incomePageBlock2:applicant2IncomeExempt');
        //     }

        //     if(exemptIndicator.checked == true){
        //         j$("#income"+list+"Section").hide();

        //         if("{!JSEncode(TEXT(applicantList.size))}">1){
        //             j$("#subtitle"+list+"Id").hide();
        //         }
        //     } else {
        //         j$("#income"+list+"Section").show();

        //         if("{!JSEncode(TEXT(applicantList.size))}">1){
        //             j$("#subtitle"+list+"Id").show();
        //         }
        //     }
        // }

        /*  Description: Function used for the header buttons "Save Application" & "Logout"
         *  Author: Jade Serrano
         *  Date Created: 09-APR-2014
         *  Input: None
         *  Return:
         */
        function headerButtons(action) {
            if (action == 'register') {
                //action function
                headerRegister();
            } else if (action == 'logout') {
                //action function
                headerLogout();
            }
        }
        window.onbeforeunload = function (e) {
            var flag = document.getElementById("GETemplate:GETemplate:mainForm:navFlag");
            if (flag.value == false) {
                //return "Application has not been saved. Do you wish to exit?";
            }
        }
        function setNavigationFlag(val) {
            document.getElementById('GETemplate:GETemplate:mainForm:navFlag').value = val;
        }
        function adjustStyleSheets() {
            var res = document.getElementById("GETemplate:GETemplate:mainForm:loanValid");
            if (res.value == "false") {
                document.getElementById("countIcons").className = "span12 adjustmeicon triggericon";
            }
        }
        executeLoad();
    </script>


    <!-- @title     Design OverRide for APP_JointIncome VF Page -->
    <!-- @author    gerome.teodosio@cloudsherpas.com            -->
    <!--            gerome.h.teodosio@Accenture.com             -->

    <!-- Include MobileStyles component to fix general mobile style issues -->
    <c:APP_GSD_MobileStyles />

    <style>
        @media screen and (max-width: 415px) {
            .pbBody>.span12 {
                display: block !important;
                width: 100% !important;
            }

            .tabbable.mobileCon {
                padding-left: 0 !important;
            }
        }
    </style>

    <!-- Include StylePicker component to fix general brand style issues -->
    <c:APP_GSD_StylePicker />

    <!-- Aussie brand styling specific for APP_JointIncome VF Page -->
    <apex:outputPanel rendered="{!$Site.Name=='Aussie'}">
        <link href="{!URLFOR($Resource.LatitudeIcons, '/LatitudeIcons/gem-icons.css')}" rel="stylesheet" />
        <style>
            .header {
                padding: 25px 0px;
            }

            .nav-tabs li {
                border: 1px solid #711371;
                width: 50%;
            }

            .nav-tabs li.active a {
                border: 0 !important;
                border-radius: 0;
                padding-bottom: 12px;
                width: 100%;
            }

            .nav-tabs>li.active>a,
            .nav-tabs>li.active>a:hover,
            .nav-tabs>li.active>a:focus {
                background: #711371 !important;
                color: white !important;
            }

            .btn.btn-block.btn-large.btn-reset-m.btn-normalc.fright.GPrimary-button {
                background-position: 90% 50%;
                text-align: left;
            }

            .btn.btn-large.btn-block.btn-addc.btn-addanother.GAdd-income:hover {
                background-color: #512d6d !important;
                border: 2px solid transparent !important;
                color: white !important;
            }

            .btn.btn-large.btn-block.btn-addc.btn-addanother.GAdd-income:focus {
                background-color: #5D8A25 !important;
            }

            @media screen and (min-width: 415px) {
                .maincontent .maincontent {
                    margin-left: 0px !important;
                }

                header #header.header {
                    padding: 0;
                }

                .span8 h2 {
                    margin: 0;
                    margin-bottom: 20px !important;
                }

                .boxlink {
                    margin: 2px !important;
                }

                .nav-tabs>li.active>a,
                .nav-tabs>li.active>a:hover,
                .nav-tabs>li.active>a:focus {
                    background: #711371 !important;
                    color: white !important;
                }

                .btn-addanother,
                .btn-addanother:hover,
                .btn-addanother:focus,
                .btn-addanother:active {
                    background-position: 25% 50% !important;
                }

                .tablemainlist>span>.span12 {
                    margin-left: 20px !important;
                    text-align: right;
                }

                div#countIcons {
                    width: 930px;
                    margin-left: 50px;
                }
            }

            @media screen and (max-width: 415px) {
                .header.headbborder {
                    padding: 20px 0px;
                }

                .span12.fleft .btn.GPrimary-button {
                    margin-top: -90px !important;
                }
                .mobileCon h3.subpagetitle span {
                    font-size: 23px;
                }
            }

            /*For Iphone 4 and 5*/

            @media screen and (max-width: 320px) and (orientation: portrait) {
                .mv_labelh_adjust1 {
                    margin-bottom: 13px !important;
                }
            }

            /*For Iphone 6*/

            @media screen and (min-width: 321px) and (max-width: 375px) and (orientation: portrait) {
                .mv_labelh_adjust1 {
                    margin-bottom: 0px;
                }
            }
        </style>
    </apex:outputPanel>

    <!-- Latitude brand styling specific for APP_JointIncome VF Page -->
    <apex:outputPanel rendered="{!$Site.Name=='Latitude'}">
        <link href="{!URLFOR($Resource.LatitudeIcons, '/LatitudeIcons/lat-iconfix.css')}" rel="stylesheet" />
        <link href="{!URLFOR($Resource.LatitudeIcons, '/LatitudeIcons/gem-icons.css')}" rel="stylesheet" />
        <style>
            .nav-tabs>li.active>a,
            .nav-tabs>li.active>a:hover,
            .nav-tabs>li.active>a:focus {
                background: #3b73b9 !important;
                color: white !important;
            }

            .nav-tabs li {
                border: 1px solid #3b73b9;
                width: 50%;
            }

            .nav-tabs li.active a {
                border: 0 !important;
                border-radius: 0;
                padding-bottom: 12px;
                width: 100%;
            }

            .btn-addanother {
                background-position: 90% 50% !important;
            }

            span.addanothericon {
                background-size: 20px;
            }

            .page-income>h2 {
                margin-top: 0;
            }

            @media screen and (max-width: 415px) {
                .lp_eligibility {
                    display: none !important;
                }

                .btn.btn-block.btn-large.btn-reset-m.btn-normalc.fright.GPrimary-button {
                    /*background-image: none !important;*/
                }
                .mv_phone_p_c2_1 {
                    width: 100% !important;
                }
            }

            @media screen and (min-width: 415px) {
                .nav-tabs>li.active>a,
                .nav-tabs>li.active>a:hover,
                .nav-tabs>li.active>a:focus {
                    background: #3b73b9 !important;
                    color: white !important;
                }

                .btn-addanother {
                    background-color: #006ac6;
                    color: white;
                }

                .btn-addanother:hover {
                    background-image: none;
                }

                button.btn.btn-large.btn-block.removelmargin {
                    width: 100% !important;
                }

                .GAdd-02,
                .GMinus-02 {
                    display: none !important;
                }

                #countIcons {
                    display: block !important;
                }

                div#countIcons {
                    width: 800px;
                    margin-left: -80px;
                }
            }

            /*For Iphone 4 and 5*/

            @media screen and (max-width: 320px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 70px;
                }
                .mv_labelh_adjust1 {
                    margin-bottom: 28px !important;
                }
            }

            /*For Iphone 6*/

            @media screen and (min-width: 321px) and (max-width: 375px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 85px;
                }
                .mv_labelh_adjust1 {
                    margin-bottom: 31px !important;
                }
            }

            /*For Iphone 6+*/

            @media screen and (min-width: 376px) and (max-width: 425px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 95px;
                }
                .mv_labelh_adjust1 {
                    margin-bottom: 5px !important;
                }
            }
        </style>
    </apex:outputPanel>

    <!-- Gem brand styling specific for APP_JointIncome VF Page -->
    <apex:outputPanel rendered="{!$Site.Name=='Gem'}">
        <link href="{!URLFOR($Resource.LatitudeIcons, '/LatitudeIcons/gem-icons.css')}" rel="stylesheet" />
        <style>
            .nav-tabs li {
                border: 1px solid #4465ad;
                width: 50%;
            }

            .nav-tabs li.active a {
                border: 0 !important;
                border-radius: 0;
                padding-bottom: 12px;
                width: 100%;
            }

            .nav-tabs>li.active>a,
            .nav-tabs>li.active>a:hover,
            .nav-tabs>li.active>a:focus {
                background: #4465ad !important;
                color: white !important;
            }

            span.addanothericon {
                background-size: 25px;
            }

            button.btn.btn-large.btn-block.removelmargin {
                height: 40px;
            }

            @media screen and (min-width: 415px) {
                button.btn.btn-large.btn-block.removelmargin {
                    width: 100% !important;
                }

                .sidebar-left {
                    padding-top: 40px !important;
                }

                div#countIcons {
                    width: 760px;
                    margin-left: -20px;
                }

                .page-income h2 {
                    margin-top: 0;
                }

                .btn.btn-large.btn-block.GAdd-income,
                .btn-addanother,
                .btn.btn-large.btn-block.btn-addc.btn-addanother {
                    width: 100% !important;
                    background-color: transparent !important;
                    color: black;
                    border: 2px dashed #e1e1e1;
                    background-position: 70%;
                }

                .btn.btn-large.btn-block.btn-addc.btn-addanother {
                    background-position: 390px 50%;
                    background-size: 20px;
                }

                .btn.btn-large.btn-block.GAdd-income:hover,
                .btn-addanother:hover,
                .btn.btn-large.btn-block.btn-addc.btn-addanother:hover {
                    background-color: #88cdd3 !important;
                    border: 2px solid #88cdd3 !important;
                }
            }

            @media screen and (max-width: 415px) {
                .GAdd-income {
                    border: 2px solid transparent !important;
                }

                .btn.btn-block.btn-large.btn-reset-m.btn-normalc.fright.GPrimary-button {
                    background-image: none;
                }
                span.fui-arrow-left {
                    margin-top: 0px;
                    margin-left: 10px;
                }

                .mobileCon {
                    padding-left: 0 !important;
                }
            }

            @media screen and (max-width: 320px) {
                .incomeSpacer {
                    height: 65px;
                }
            }

            .minusplusicon.adconad.GAdd-02,
            .minusplusicon.miconad.GMinus-02 {
                display: none;
            }

            @media screen and (min-width: 375px) {

                .btn.btn-large.btn-block.GAdd-income {
                    width: 100% !important;
                    background-color: transparent !important;
                    color: #000 !important;
                    border: 2px dashed #e1e1e1 !important;
                    background-position: 70%;
                }
                .btn.btn-large.btn-block.GAdd-income:active {
                    background-color: #88cdd3 !important;
                    border: 2px solid #88cdd3 !important;
                }
            }

            /*For Iphone 4 and 5*/

            @media screen and (max-width: 320px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 50px;
                }
                .btn.btn-large.btn-block.GAdd-income {
                    width: 100% !important;
                    background-color: transparent !important;
                    color: #000 !important;
                    border: 2px dashed #e1e1e1 !important;
                    background-position: 70%;
                }
                .btn.btn-large.btn-block.GAdd-income:active {
                    background-color: #88cdd3 !important;
                    border: 2px solid #88cdd3 !important;
                }
                .mv_labelh_adjust1 {
                    margin-bottom: 28px !important;
                }
            }

            /*For Iphone 6*/

            @media screen and (min-width: 321px) and (max-width: 375px) and (orientation: portrait) {
                .mv_labelh_adjust1 {
                    margin-bottom: 31px !important;
                }
                .headertitle {
                    margin-left: 70px;
                }
            }

            /*For Iphone 6+*/

            @media screen and (min-width: 376px) and (max-width: 425px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 80px;
                }
            }
        </style>
    </apex:outputPanel>
    <script>
        //Better Start
        if ("{!$CurrentPage.parameters.subType}" == "betterStart") {
            enableLoanPurpose();
            loanAmtBSAU();
        }
        function enableLoanPurpose() {
            var loansize = document.getElementById("GETemplate:GETemplate:loanForm:loanPurposeSize");
            for (var i = 0; i < 1; i++) {
                var firstLP = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c").disabled = true;

            }
            for (var i = 1; i < 15; i++) {
                //var option = document.getElementById("GETemplate:GETemplate:loanForm:lw:"+i+":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c");
                // option.value = 'Please Select';
                var lpSize = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c").disabled = false;

            }
        }


        function loanAmtBSAU() {
            if ("{!$CurrentPage.parameters.subType}" == "betterStart") {
                if ('{!brand.Country__c}' == 'AU') {
                    var loansize = document.getElementById("GETemplate:GETemplate:loanForm:loanPurposeSize");
                    for (var i = 0; i < 1; i++) {
                        var firstLP = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Loan_Amount__c");
                        var lpValue = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c");
                        if (firstLP.value < 20000 || lpValue.value != 'Debt consolidation') {
                            document.getElementById("demo").style.display = "block";
                            //document.getElementById("demo").innerHTML = "Better Start loans have a minimum loan amount of $20,000. If this amount meets your needs, please update the loan amount. Alternatively, please select one of our other loan types which you can view at: <a style= 'color:antiquewhite;text-decoration:underline;padding:0px;' href=https://www.latitudefinancial.com.au/loans/>https://www.latitudefinancial.com.au/loans/</a>";
                            document.getElementById("demo").innerHTML = "A Better Start Personal Loan must be for Debt Consolidation for $20,000 or more";
                        return false;
                        } else if (firstLP.value >= 20000 && lpValue.value == 'Debt consolidation') {
                            document.getElementById("demo").style.display = "none";
                        }
                    }
                }
                else {
                    var loansizeNZ = document.getElementById("GETemplate:GETemplate:loanForm:loanPurposeSize");
                    for (var i = 0; i < 1; i++) {
                        var firstLPNZ = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Loan_Amount__c");
                        var lpValueNZ = document.getElementById("GETemplate:GETemplate:loanForm:lw:" + i + ":component-1:Loan_Purpose__c-mycomponent:Loan_Purpose__c____Value__c");
                        if (firstLPNZ.value < 20000 || lpValueNZ.value != 'Consolidation') {
                            document.getElementById("demo").style.display = "block";
                            document.getElementById("demo").innerHTML = "Better Start loans have a minimum loan amount of $20,000. If this amount meets your needs, please update the loan amount. Alternatively, please select one of our other loan types which you can view at: <a style= 'color:antiquewhite;text-decoration:underline;padding:0px;'href=https://www.latitudefinancial.com.au/loans/>https://www.latitudefinancial.com.au/loans/</a>";
                            return false;
                        } else if (firstLPNZ.value >= 20000 && lpValueNZ.value == 'Consolidation') {
                            document.getElementById("demo").style.display = "none";
                        }
                    }
                }

            }
        }
                        //End
    </script>
    <!-- Kiwibank brand styling specific for APP_JointIncome VF Page -->
    <apex:outputPanel rendered="{!$Site.Name=='Kiwibank'}">
        <link href="{!URLFOR($Resource.LatitudeIcons, '/LatitudeIcons/kiwibank-iconfix.css')}" rel="stylesheet" />
        <style>
            .nav-tabs>li.active>a,
            .nav-tabs>li.active>a:hover,
            .nav-tabs>li.active>a:focus {
                background: #88C83D !important;
                color: white !important;
            }

            .nav-tabs li {
                border: 1px solid #88C83D;
                width: 50%;
            }

            .nav-tabs li.active a {
                border: 0 !important;
                border-radius: 0;
                padding-bottom: 12px;
                width: 100%;
            }

            .apexp .pbBody .btn-block.buttonarrowimg,
            .apexp .pbBody .btn-block.buttonarrowimg:hover,
            .btn.btn-block.btn-large.btn-reset-m.btn-normalc.fright.GPrimary-button,
            .btn.btn-block.btn-large.btn-reset-m.btn-normalc.fright.GPrimary-button:hover {
                text-align: left !important;
                color: white !important;
            }

            select {
                height: 40px !important;
            }

            /*Defect-705 - Fixed by MDAVID - 4/21/2016*/

            @media screen and (min-width: 415px) {
                .btn.btn-large.btn-block.btn-addc.btn-addanother.GAdd-income,
                .btn-addanother {
                    background-color: #fff !important;
                    border: 2px dashed #e1e1e1;
                    color: #555555;
                    text-align: center !important;
                }

                .btn.btn-large.btn-block.btn-addc.btn-addanother.GAdd-income:hover,
                .btn-addanother:hover {
                    background-color: #88C83D !important;
                    color: white;
                    border: 2px solid #88C83D;
                }

                .boxlink {
                    margin: 2px !important;
                }

                .maincontent.sidebar-left.mobileCon.GMob-container {
                    margin-top: 20px;
                }

                .btn.btn-block.btn-normalc.buttonarrowimg.GPrimary-button {
                    background-color: #88c83d !important;
                }

                .pllabel {
                    width: 90px;
                    text-align: right;
                }

                .pllabel label {
                    font-weight: normal;
                }

                .inpselfield select,
                select {
                    height: 40px !important;
                    margin-top: 5px;
                }

                .page-income h2 {
                    margin-top: 0;
                }

                .btn.btn-block.btn-normalc.buttonarrowimg.GPrimary-button {
                    margin-top: 0;
                    text-align: left !important;
                }
            }

            @media screen and (max-width: 415px) {
                .row-fluid.marginlftzero {
                    width: 100%;
                    margin: 0 auto !important;
                }

                .btn.btn-block.btn-normalc.buttonarrowimg.GPrimary-button {
                    margin-top: -80px;
                }

                .span5.headertitle {
                    width: 95% !important;
                }

                li.active {
                    background: #88C83D !important;
                    border-radius: 3px 3px 0 0;
                }

                li.active a {
                    border: 0 !important;
                }
            }

            /*For Iphone 4 and 5*/

            @media screen and (max-width: 320px) and (orientation: portrait) {
                .mv_labelh_adjust1 {
                    margin-bottom: 18px;
                }
            }

            /*For Iphone 6*/

            @media screen and (min-width: 321px) and (max-width: 375px) and (orientation: portrait) {
                .mv_labelh_adjust1 {
                    margin-bottom: 26px;
                }
            }

            /*For Iphone 6+*/

            @media screen and (min-width: 376px) and (max-width: 425px) and (orientation: portrait) {
                .headertitle {
                    margin-left: 5px;
                }
            }
        </style>
    </apex:outputPanel>
</apex:page>